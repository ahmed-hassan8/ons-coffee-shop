import React, { useState } from 'react';
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Input } from '@/components/ui/input';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';

const PurchaseOrderSystem = () => {
  const [currentPage, setCurrentPage] = useState('login');
  const [userName, setUserName] = useState('');
  const [selectedBranch, setSelectedBranch] = useState('');

  const inventory = {
    'Cups & Lids': [
      { name: '9OZ', unit: 'Carton', quantityPerUnit: '500 Cups', orderPoint: 'Half Carton' },
      { name: '12OZ', unit: 'Carton', quantityPerUnit: '500 Cups', orderPoint: 'Half Carton' },
      { name: 'Lids 9OZ', unit: 'Carton', quantityPerUnit: '1000 Lids', orderPoint: 'Half Carton' }
    ],
    'Filters': [
      { name: 'V60 Filters', unit: 'Box', quantityPerUnit: '100 Filters', orderPoint: '2 Boxes' },
      { name: 'Chemex Filters', unit: 'Box', quantityPerUnit: '100 Filters', orderPoint: '2 Boxes' }
    ],
    'Cleaning Materials': [
      { name: 'Sanitizer', unit: 'Bottle', quantityPerUnit: '1L', orderPoint: '2 Bottles' },
      { name: 'Detergent', unit: 'Container', quantityPerUnit: '5L', orderPoint: '1 Container' }
    ]
  };

  const handleLogin = () => {
    if (userName && selectedBranch) {
      setCurrentPage('main');
    }
  };

  if (currentPage === 'login') {
    return (
      <Card className="w-full max-w-md mx-auto mt-8">
        <CardHeader>
          <CardTitle>Login</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <div className="space-y-2">
            <label>Branch</label>
            <Select value={selectedBranch} onValueChange={setSelectedBranch}>
              <SelectTrigger>
                <SelectValue placeholder="Select Branch" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="al-nafl">Al-Nafl</SelectItem>
                <SelectItem value="aqiq">Aqiq</SelectItem>
              </SelectContent>
            </Select>
          </div>
          
          <div className="space-y-2">
            <label>User Name</label>
            <Input 
              type="text" 
              value={userName}
              onChange={(e) => setUserName(e.target.value)}
              placeholder="Enter your name"
            />
          </div>
          
          <Button onClick={handleLogin} className="w-full">
            Login
          </Button>
        </CardContent>
      </Card>
    );
  }

  return (
    <div className="container mx-auto p-4">
      <Tabs defaultValue="purchase">
        <TabsList className="mb-4">
          <TabsTrigger value="purchase">Purchase Order</TabsTrigger>
          <TabsTrigger value="inventory">Inventory</TabsTrigger>
        </TabsList>

        <TabsContent value="purchase">
          <Card>
            <CardHeader>
              <CardTitle>Purchase Order Form</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                <section>
                  <h3 className="text-lg font-semibold">Branch Information</h3>
                  <p>Branch: {selectedBranch}</p>
                  <p>User: {userName}</p>
                </section>

                {['Equipment', 'Consumables', 'Office Supplies'].map((section) => (
                  <section key={section} className="border p-4 rounded">
                    <h3 className="text-lg font-semibold">{section}</h3>
                    <Button variant="outline" size="sm" className="mt-2">
                      Add {section.slice(0, -1)}
                    </Button>
                  </section>
                ))}

                <Button 
                  onClick={() => {
                    // Here you would generate PDF and share to WhatsApp
                    window.open('https://chat.whatsapp.com/Fyoa3jnYx1ZERYB90DkVRX', '_blank');
                  }}
                  className="w-full"
                >
                  Generate & Share on WhatsApp
                </Button>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        <TabsContent value="inventory">
          <Card>
            <CardHeader>
              <CardTitle>Inventory</CardTitle>
            </CardHeader>
            <CardContent>
              {Object.entries(inventory).map(([category, items]) => (
                <div key={category} className="mb-6">
                  <h3 className="text-lg font-semibold mb-2">{category}</h3>
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {items.map((item) => (
                      <Card key={item.name} className="p-4">
                        <h4 className="font-medium">{item.name}</h4>
                        <p>Unit: {item.unit}</p>
                        <p>Quantity per Unit: {item.quantityPerUnit}</p>
                        <p>Order Point: {item.orderPoint}</p>
                      </Card>
                    ))}
                  </div>
                </div>
              ))}
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>
    </div>
  );
};

export default PurchaseOrderSystem;
